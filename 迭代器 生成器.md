# 迭代器 生成器

~~~js
const names = ['abc','ad', 'sdsd']
// 创建一个迭代器对象来访问数组
let index = 0;
const iter = {
    next: function(){
        if(index< names.length){
            return {done:false,value:names[index++]}

        }
        else {
            return {done:true,value:undefined}
        }
    }
}
console.log(iter.next())
console.log(iter.next())
console.log(iter.next())
console.log(iter.next())
console.log(iter.next())

[Running] node "c:\Users\root\Desktop\静态页+静态组件\todoList\todolist\Peflect.js"
{ done: false, value: 'abc' }
{ done: false, value: 'ad' }
{ done: false, value: 'sdsd' }
{ done: true, value: undefined }
{ done: true, value: undefined }

[Done] exited with code=0 in 0.064 seconds
~~~

## 封装成函数

~~~js
function iter(arr){
    let index = 0;
    return {
        next: function(){
            if(index < arr.length){
                return {done:false,value:arr[index++]}
            }
            else{
                return {done:true,value:undefined}
            }
        }
    }
}


const names = ['abc','ad', 'sdsd']
const iters = iter(names)
console.log(iters.next())
console.log(iters.next())
console.log(iters.next())
console.log(iters.next())
console.log(iters.next())


[Running] node "c:\Users\root\Desktop\静态页+静态组件\todoList\todolist\Peflect.js"
{ done: false, value: 'abc' }
{ done: false, value: 'ad' }
{ done: false, value: 'sdsd' }
{ done: true, value: undefined }
{ done: true, value: undefined }

[Done] exited with code=0 in 0.065 seconds

~~~

## for ...of 可以遍历的东西必须是一个可迭代对象，所有对象不行，数组是可迭代的(String,array,Map,Set)

~~~js
const obj = {
    name:'why',
    age:18
}
console.log('对象的[Symbol.iterator]',obj[Symbol.iterator])
const arr =[14,18,22]
console.log('数组的[Symbol.iterator]',arr[Symbol.iterator])
// for(const item of obj){
//     console.log(item)
// }
for(const item of arr){
    console.log(item)
}

[Running] node "c:\Users\root\Desktop\静态页+静态组件\todoList\todolist\Peflect.js"
对象的[Symbol.iterator] undefined
数组的[Symbol.iterator] [Function: values]
14
18
22

[Done] exited with code=0 in 0.089 seconds

~~~

## 可迭代的原因是内部有一个函数 [Symbol.iterator]:function(){ return next:()=>{}}   // next使用箭头函数的目的是this指向上一作用域的函数，指向name

~~~js
const iter = {
    name:['abd',"ddf","sdse"],
    [Symbol.iterator]: function(){
        let index = 0;
        return {
            next: ()=>{
                if (index < this.name.length){
                    return {done: false, value: this.name[index++]}
                }
                else{
                    return {done: true, value: undefined}
                }
            }
        }
    }
}

const iters = iter[Symbol.iterator]()
console.log(iters.next())
console.log(iters.next())
console.log(iters.next())
console.log(iters.next())


[Running] node "c:\Users\root\Desktop\静态页+静态组件\todoList\todolist\Peflect.js"
{ done: false, value: 'abd' }
{ done: false, value: 'ddf' }
{ done: false, value: 'sdse' }
{ done: true, value: undefined }

[Done] exited with code=0 in 0.085 seconds

~~~

## 可迭代对象